<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" ng-app="loadoutApp"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <link rel="stylesheet" href="css/styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.10/angular.min.js"></script>
    <script src="js/vendor/modernizr-2.6.2.min.js"></script>
  </head>
  <body ng-cloak>
    <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->


    <div ng-controller="LoadoutCalcCtrl" class="loadout-calc">
      <h1>The Last of Us Loadout Calculator</h1>
      <div class="loadout-calc__cols">
        <div class="loadout-calc__slots-col">
          <div class="loadout-slot-wrapper loadout-slot-wrapper--weapon">
            <div class="loadout-slot" ng-class="{active: skillSlot == 1}" ng-click="setSkillSet('small', 1)">
              <span class="loadout-slot__icon icon-level-{{slots.0.level}} icon-skill-{{slots.0.id}}"></span>
              <span class="loadout-slot__cost">{{slots.0.cost}}</span>
              <span class="loadout-slot__name">{{slots.0.name}}</span>
            </div>
            <div class="loadout-slot" ng-class="{active: skillSlot == 2}" ng-click="setSkillSet('large', 2)">
              <span class="loadout-slot__icon icon-level-{{slots.1.level}} icon-skill-{{slots.1.id}}"></span>
              <span class="loadout-slot__cost">{{slots.1.cost}}</span>
              <span class="loadout-slot__name">{{slots.1.name}}</span>
            </div>
          </div>
          <div class="loadout-slot-wrapper loadout-slot-wrapper--skill">
            <div class="loadout-slot" ng-class="{active: skillSlot == $index + 3}" ng-click="setSkillSet('skill', $index + 3)" ng-repeat="i in getRepeat(4) track by $index">
              <span class="loadout-slot__icon icon-level-{{slots[$index + 2].level}} icon-skill-{{slots[$index + 2].id}}"></span>
              <span class="loadout-slot__cost">{{slots[$index + 2].cost}}</span>
              <span class="loadout-slot__name">{{slots[$index + 2].name}}</span>
            </div>
          </div>
          <div class="loadout-slot-wrapper loadout-slot-wrapper--purchase">
            <div class="loadout-slot" ng-class="{active: skillSlot == 7}" ng-click="setSkillSet('purchase', 7)">
              <span class="loadout-slot__icon icon-level-{{slots.6.level}} icon-skill-{{slots.6.id}}"></span>
              <span class="loadout-slot__cost">{{slots.6.cost}}</span>
              <span class="loadout-slot__name">{{slots.6.name}}</span>
            </div>
          </div>
        </div>
        <div class="loadout-calc__skills-col">
          <div class="loadout-calc__info-col">
            <h2 class="slot-name">{{slotName}}</h2>
            <span class="loadout-points">{{remainingPoints}}/13 Loadout Points</h2>
          </div>
          <div class="loadout-calc__skill-list-col">
            <ul class="loadout-skills loadout-skills--weapon" ng-show="getSkillSet('small')">
              <li class="loadout-skills__slot" ng-class="{active: skillDetail == skill.id}" ng-repeat="skill in skills.small" ng-click="setSkillDetail(skill.id)">
                <span class="loadout-slot__icon icon-level-1 icon-skill-{{skill.id}}"></span>
                <span class="loadout-slot__cost">{{skill.levels.0.cost}}</span>
                <span class="loadout-slot__name">{{skill.name}}</span>
              </li>
            </ul>
            <ul class="loadout-skills loadout-skills--weapon" ng-show="getSkillSet('large')">
              <li class="loadout-skills__slot" ng-class="{active: skillDetail == skill.id}" ng-repeat="skill in skills.large" ng-click="setSkillDetail(skill.id)">
                <span class="loadout-slot__icon icon-level-1 icon-skill-{{skill.id}}"></span>
                <span class="loadout-slot__cost">{{skill.levels.0.cost}}</span>
                <span class="loadout-slot__name">{{skill.name}}</span>
              </li>
            </ul>
            <ul class="loadout-skills loadout-skills--skill" ng-show="getSkillSet('skill')">
              <li class="loadout-skills__slot" ng-class="{active: skillDetail == skill.id}" ng-repeat="skill in skills.skill" ng-click="setSkillDetail(skill.id)">
                <span class="loadout-slot__icon icon-level-1 icon-skill-{{skill.id}}"></span>
                <span class="loadout-slot__cost">{{skill.levels.0.cost}}</span>
                <span class="loadout-slot__name">{{skill.name}}</span>
              </li>
            </ul>
            <ul class="loadout-skills loadout-skills--purchase" ng-show="getSkillSet('purchase')">
              <li class="loadout-skills__slot" ng-class="{active: skillDetail == skill.id}" ng-repeat="skill in skills.purchase" ng-click="setSkillDetail(skill.id)">
                <span class="loadout-slot__icon icon-level-1  icon-skill-{{skill.id}}"></span>
                <span class="loadout-slot__cost">{{skill.levels.0.cost}}</span>
                <span class="loadout-slot__name">{{skill.name}}</span>
              </li>
            </ul>
          </div>
          <div class="loadout-calc__details-col">
            <div class="skill-detail-wrapper" ng-repeat="(cat, category) in skills">
              <div class="skill-detail" ng-repeat="skill in category" ng-show="getSkillDetail(skill.id)">
                <div class="skill-detail__level_select">
                  <h2>Select level</h2>
                  <span class="loadout-slot__icon icon-level-{{key + 1}}  icon-skill-{{skill.id}}"  ng-class="{active: skillLevel == key}" ng-repeat="(key, level) in skill.levels" ng-mouseover="setSkillLevel(key)" ng-click="setSkill(skill)"></span>
                </div>
                <div class="skill-detail__content" ng-repeat="(key, level) in skill.levels" ng-show="getSkillLevel(key)">
                  <div class="skill-detail__header">
                    <span class="skill-detail__icon icon-level-{{key + 1}} icon-skill-{{skill.id}}"></span>
                    <div class="skill-detail__header-text">
                      <span class="skill-detail__name">{{skill.name}} {{key + 1}}</span>
                      <span class="skill-detail__cost">{{level.cost}} Points</span>
                    </div>
                  </div>
                  <div class="skill-detail__weapon" ng-if="skill.rate">
                    <label>Fire rate</label>
                    <div class="weapon-bars weapon-bars--{{skill.rate}}"></div>
                    <label>Reload Speed</label>
                    <div class="weapon-bars weapon-bars--{{skill.reload}}"></div>
                    <label>Damage</label>
                    <div class="weapon-bars weapon-bars--{{skill.damage}}"></div>
                    <label>Accuracy</label>
                    <div class="weapon-bars weapon-bars--{{skill.accuracy}}"></div>
                  </div>
                  <span class="skill-detail__description">{{level.description}}</span>
                </div>
              </div>
            </div>
          </div>
          <div class="loadout-calc__footer-col"></div>
        </div>
      </div>
    </div>


    <script src="js/app.js"></script>
    <script src="js/controllers/loadoutCalcCtrl.js"></script>
    <script src="js/services/skillService.js"></script>
    <!-- TODO: Google Analytics. -->
  </body>
</html>
